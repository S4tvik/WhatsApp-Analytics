<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
    integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
    integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
    crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>


</head>
<section>
<body style="width: 100%;height: 100%;">
  <section class="" style="background-image: linear-gradient(to left top,#d9ecc7, #07a3b2);">
    {% if context.analysis %}
    <div class="container text-center py-5">
      <h1>{{ context.analysis.grpname }}</h1>
      <br>
      <h5>{{ context.analysis.startDate }} to {{ context.analysis.endDate }}</h5>
      <hr>
    </div>
    {% endif %}
    {% if context.analysis %}
    <div class="container text-center py-5">
      <h3>Total Messages:{{ context.analysis.totalMessages }}</h3>
      <hr>
    </div>
    {% endif %}
    {% if context.analysis %}
    <div class="container-fluid">
      <div class="row"><center><h3>Users In Group</h3></center></div>
      <br>
      <div class="row justify-content-center" id="conversation-users"></div>
    </div>
    {% endif %}
    <hr>
    <div class="container-fluid text-center">
      <div class="row">
        <div class="col mb-5">
          <div class="container text-center mb-7">
            <h4>Messages v/s Users</h4>
          </div>
          <!-- <img src="{{url_for('static', filename='fig1.png')}}" alt="" style="width: 70%;"> -->
          <iframe src="./static/fig1.html" height="400px" width="700px" frameborder="0"></iframe>

        </div>
        
        <div class="col mb-5">
          <div class="contaier text-center mb-5">
            <h4>Number of media files v/s Users</h4>
          </div>
          <!-- <img src="{{url_for('static', filename='fig2.png')}}" alt="" style="width: 70%;"> -->
          <iframe src="./static/fig2.html" height="400px" width="700px" frameborder="0"></iframe>
        </div>
        </div>
        <hr>
        <div class="w-100"></div>
        <div class="col">
          <div class="container text-center  py-3  mb-5">
            <h4>Users Activity by Hours</h4>
          </div>
          <!-- <img src="{{url_for('static', filename='fig3.png')}}" alt="" style="width: 70%; height: 60%;"> -->
          <iframe src="./static/fig3.html" height="400px" width="700px" frameborder="0"></iframe>
        </div>
        <hr>
        <div class="w-100"></div>
        <div class="col mb-5">
          <div class="contaier text-center mb-5">
            <h4>User Activity by day</h4>
          </div>
          <!-- <img src="{{url_for('static', filename='fig4.png')}}" alt="" style="width: 70%;"> -->
          <iframe src="./static/fig4.html" height="400px" width="700px" frameborder="0"></iframe>
        </div>
        <div class="col mb-5">
          <div class="contaier text-center mb-5">
            <h4>Number Messages per month</h4>
          </div>
          <iframe src="./static/fig5.html" height="400px" width="700px" frameborder="0"></iframe>

        </div>
        <div class="w-100"></div>
        <div class="col mb-5">
          <div class="contaier text-center mb-5">
            <h4>Number Messages per month</h4>
          </div>
          <iframe src="./static/fig6.html" height="400px" width="700px" frameborder="0"></iframe>

        </div>
        <div class="col mb-5">
          <div class="contaier text-center mb-5">
            <h4>Word Cloud of the complete chat</h4>
          </div>
          <img src="{{url_for('static', filename='fig7.png')}}" alt="" style="width: 70%;">

        </div>
      </div>
    </div>
    <hr>
    <div class="container mb-5">
      <center>
        <h3>Sentiment Analysis</h3>
      </center>
      <br><br>
      <div class="row mb-5">
        <div class="col ">
          <h3>Top 5 Positve Texts.</h3>
        </div>
        <div class="col ">
          <h3>Top 5 Neutral Texts.</h3>
        </div>
      </div>
      <div class="row mb-5">
        {% for i in text %}
        <div class="col  mb-5">
          {%for j in i%}
          <h6>{{loop.index}}. {{j}}</h6>
          {%endfor%}
        </div>
        {% endfor %}
      </div>
    </div>

  </section>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
    integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
    integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
    crossorigin="anonymous"></script>
    <script>
      var split_users = "{{context.analysis.users|safe}}";
      var userCount = "{{context.analysis.userCount}}";
      const users= split_users.slice(1,-1).split(",");
      var usersDisplay = document.getElementById("conversation-users");
      
   for(var i = 0; i < userCount; i++) {
       userElement = document.createElement('div');
       userElement.innerHTML = users[i].trim().slice(1,-1);
       // userElement.style.color = colorSet[i];
       userElement.classList.add('col-sm-2');
       userElement.classList.add('card');
       usersDisplay.innerHTML += userElement.outerHTML;
   }
   </script>
   </section>
</body>

</html>
